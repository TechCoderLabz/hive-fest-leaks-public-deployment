/**
 * @license bytebuffer.js (c) 2015 Daniel Wirtz <dcode@dcode.io>
 * Backing buffer: ArrayBuffer
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/bytebuffer.js for details
 * modified by @xmcl/bytebuffer
 * And customized for hive-tx and Aioha
 */class g{static VERSION="0.0.1";static LITTLE_ENDIAN=!0;static BIG_ENDIAN=!1;static DEFAULT_CAPACITY=16;static DEFAULT_ENDIAN=g.BIG_ENDIAN;static DEFAULT_NOASSERT=!1;buffer;static METRICS_BYTES="b";view;offset;markedOffset;limit;littleEndian;noAssert;constructor(t,e,n){if(typeof t>"u"&&(t=g.DEFAULT_CAPACITY),typeof e>"u"&&(e=g.DEFAULT_ENDIAN),typeof n>"u"&&(n=g.DEFAULT_NOASSERT),!n){if(t=t|0,t<0)throw RangeError("Illegal capacity");e=!!e,n=!!n}this.buffer=t===0?q:new ArrayBuffer(t),this.view=t===0?new DataView(q):new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=e,this.noAssert=n}static type=function(){return ArrayBuffer};static wrap=function(t,e,n){if(t===null||typeof t!="object")throw TypeError("Illegal buffer");let o;if(t instanceof g)return o=t.clone(),o.markedOffset=-1,o;if(t instanceof Uint8Array)o=new g(0,e,n),t.length>0&&(o.buffer=t.buffer,o.offset=t.byteOffset,o.limit=t.byteOffset+t.byteLength,o.view=new DataView(t.buffer));else if(t instanceof ArrayBuffer)o=new g(0,e,n),t.byteLength>0&&(o.buffer=t,o.offset=0,o.limit=t.byteLength,o.view=t.byteLength>0?new DataView(t):new DataView(q));else if(Object.prototype.toString.call(t)==="[object Array]"){o=new g(t.length,e,n),o.limit=t.length;for(let l=0;l<t.length;++l)o.view.setUint8(l,t[l])}else throw TypeError("Illegal buffer");return o};writeBytes=this.append;writeInt8(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=1,this.view.setInt8(e,t),n&&(this.offset+=1),this}writeByte=this.writeInt8;writeUint8(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=1,this.view.setUint8(e,t),n&&(this.offset+=1),this}writeUInt8=this.writeUint8;writeInt16(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=2,this.view.setInt16(e,t,this.littleEndian),n&&(this.offset+=2),this}writeShort=this.writeInt16;writeUint16(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=2,this.view.setUint16(e,t,this.littleEndian),n&&(this.offset+=2),this}writeUInt16=this.writeUint16;writeUint32(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=4,this.view.setUint32(e,t,this.littleEndian),n&&(this.offset+=4),this}writeUInt32=this.writeUint32;append(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}t instanceof g||(t=g.wrap(t));const o=t.limit-t.offset;if(o<=0)return this;e+=o;let l=this.buffer.byteLength;return e>l&&this.resize((l*=2)>e?l:e),e-=o,new Uint8Array(this.buffer,e).set(new Uint8Array(t.buffer).subarray(t.offset,t.limit)),t.offset+=o,n&&(this.offset+=o),this}assert(t){return this.noAssert=!t,this}capacity(){return this.buffer.byteLength}clone(t){const e=new g(0,this.littleEndian,this.noAssert);return t?(e.buffer=new ArrayBuffer(this.buffer.byteLength),new Uint8Array(e.buffer).set(this.buffer),e.view=new DataView(e.buffer)):(e.buffer=this.buffer,e.view=this.view),e.offset=this.offset,e.markedOffset=this.markedOffset,e.limit=this.limit,e}flip(){return this.limit=this.offset,this.offset=0,this}resize(t){if(!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if(t|=0,t<0)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){const e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this}slice(t,e){if(typeof t>"u"&&(t=this.offset),typeof e>"u"&&(e=this.limit),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,t<0||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}const n=this.clone();return n.offset=t,n.limit=e,n}writeInt64(t,e){const n=typeof e>"u";if(typeof e>"u"&&(e=this.offset),!this.noAssert){if(typeof t=="number"&&(t=BigInt(t)),typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}typeof t=="number"&&(t=BigInt(t)),e+=8;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=8,this.view.setBigInt64(e,t,this.littleEndian),n&&(this.offset+=8),this}writeLong=this.writeInt64;writeUint64(t,e){const n=typeof e>"u";if(typeof e>"u"&&(e=this.offset),!this.noAssert){if(typeof t=="number"&&(t=BigInt(t)),typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}typeof t=="number"&&(t=BigInt(t)),e+=8;let o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=8,this.view.setBigUint64(e,t,this.littleEndian),n&&(this.offset+=8),this}writeUInt64=this.writeUint64;toBuffer(t){let e=this.offset,n=this.limit;if(!this.noAssert){if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,typeof n!="number"||n%1!==0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(!t)return e===0&&n===this.buffer.byteLength?this.buffer:this.buffer.slice(e,n);if(e===n)return q;const o=new ArrayBuffer(n-e);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(e,n),0),o}toArrayBuffer=this.toBuffer;writeVarint32(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="number"||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}const o=this.calculateVarint32(t);let l;e+=o;let p=this.buffer.byteLength;for(e>p&&this.resize((p*=2)>e?p:e),e-=o,t>>>=0;t>=128;)l=t&127|128,this.view.setUint8(e++,l),t>>>=7;return this.view.setUint8(e++,t),n?(this.offset=e,this):o}calculateVarint32(t){return t=t>>>0,t<128?1:t<16384?2:t<1<<21?3:t<1<<28?4:5}writeVString(t,e){const n=typeof e>"u";if(n&&(e=this.offset),!this.noAssert){if(typeof t!="string")throw TypeError("Illegal str: Not a string");if(typeof e!="number"||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}const o=e,l=w.calculateUTF16asUTF8(J(t),this.noAssert)[1],p=this.calculateVarint32(l);e+=p+l;let m=this.buffer.byteLength;if(e>m&&this.resize((m*=2)>e?m:e),e-=p+l,e+=this.writeVarint32(l,e),w.encodeUTF16toUTF8(J(t),(function(k){this.view.setUint8(e++,k)}).bind(this)),e!==o+l+p)throw RangeError("Illegal range: Truncated data, "+e+" == "+(e+l+p));return n?(this.offset=e,this):e-o}}function J(i){let t=0;return function(){return t<i.length?i.charCodeAt(t++):null}}const q=new ArrayBuffer(0),w={};w.MAX_CODEPOINT=1114111;w.encodeUTF8=function(i,t){let e=null;for(typeof i=="number"&&(e=i,i=function(){return null});e!==null||(e=i())!==null;)e<128?t(e&127):e<2048?(t(e>>6&31|192),t(e&63|128)):e<65536?(t(e>>12&15|224),t(e>>6&63|128),t(e&63|128)):(t(e>>18&7|240),t(e>>12&63|128),t(e>>6&63|128),t(e&63|128)),e=null};w.decodeUTF8=function(i,t){let e,n,o,l;const p=function(m){m=m.slice(0,m.indexOf(null));const k=Error(m.toString());throw k.name="TruncatedError",k.bytes=m,k};for(;(e=i())!==null;)if((e&128)===0)t(e);else if((e&224)===192)(n=i())===null&&p([e,n]),t((e&31)<<6|n&63);else if((e&240)===224)((n=i())===null||(o=i())===null)&&p([e,n,o]),t((e&15)<<12|(n&63)<<6|o&63);else if((e&248)===240)((n=i())===null||(o=i())===null||(l=i())===null)&&p([e,n,o,l]),t((e&7)<<18|(n&63)<<12|(o&63)<<6|l&63);else throw RangeError("Illegal starting byte: "+e)};w.UTF16toUTF8=function(i,t){let e,n=null;for(;(e=n!==null?n:i())!==null;){if(e>=55296&&e<=57343&&(n=i())!==null&&n>=56320&&n<=57343){t((e-55296)*1024+n-56320+65536),n=null;continue}t(e)}n!==null&&t(n)};w.UTF8toUTF16=function(i,t){let e=null;for(typeof i=="number"&&(e=i,i=function(){return null});e!==null||(e=i())!==null;)e<=65535?t(e):(e-=65536,t((e>>10)+55296),t(e%1024+56320)),e=null};w.encodeUTF16toUTF8=function(i,t){w.UTF16toUTF8(i,function(e){w.encodeUTF8(e,t)})};w.decodeUTF8toUTF16=function(i,t){w.decodeUTF8(i,function(e){w.UTF8toUTF16(e,t)})};w.calculateCodePoint=function(i){return i<128?1:i<2048?2:i<65536?3:4};w.calculateUTF8=function(i){let t,e=0;for(;(t=i())!==null;)e+=t<128?1:t<2048?2:t<65536?3:4;return e};w.calculateUTF16asUTF8=function(i){let t=0,e=0;return w.UTF16toUTF8(i,function(n){++t,e+=n<128?1:n<2048?2:n<65536?3:4}),[t,e]};function te(i){if(i.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let c=0;c<t.length;c++)t[c]=255;for(let c=0;c<i.length;c++){const y=i.charAt(c),E=y.charCodeAt(0);if(t[E]!==255)throw new TypeError(y+" is ambiguous");t[E]=c}const e=i.length,n=i.charAt(0),o=Math.log(e)/Math.log(256),l=Math.log(256)/Math.log(e);function p(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let y=0,E=0,d=0;const T=c.length;for(;d!==T&&c[d]===0;)d++,y++;const S=(T-d)*l+1>>>0,x=new Uint8Array(S);for(;d!==T;){let D=c[d],U=0;for(let N=S-1;(D!==0||U<E)&&N!==-1;N--,U++)D+=256*x[N]>>>0,x[N]=D%e>>>0,D=D/e>>>0;if(D!==0)throw new Error("Non-zero carry");E=U,d++}let v=S-E;for(;v!==S&&x[v]===0;)v++;let C=n.repeat(y);for(;v<S;++v)C+=i.charAt(x[v]);return C}function m(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let y=0,E=0,d=0;for(;c[y]===n;)E++,y++;const T=(c.length-y)*o+1>>>0,S=new Uint8Array(T);for(;y<c.length;){const D=c.charCodeAt(y);if(D>255)return;let U=t[D];if(U===255)return;let N=0;for(let M=T-1;(U!==0||N<d)&&M!==-1;M--,N++)U+=e*S[M]>>>0,S[M]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");d=N,y++}let x=T-d;for(;x!==T&&S[x]===0;)x++;const v=new Uint8Array(E+(T-x));let C=E;for(;x!==T;)v[C++]=S[x++];return v}function k(c){const y=m(c);if(y)return y;throw new Error("Non-base"+e+" character")}return{encode:p,decodeUnsafe:m,decode:k}}var re="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const ne=te(re),ie="STM";class j{constructor(t,e=ie){this.key=t,this.prefix=e}static fromString(t){const{key:e,prefix:n}=oe(t);return new j(e,n)}static from(t){return t instanceof j?t:j.fromString(t)}}const oe=i=>{const t=i.slice(0,3);i=i.slice(3);const e=ne.decode(i);return{key:e.subarray(0,e.length-4),prefix:t}},W=i=>{const t=[];for(let e=0;e<i.length;e+=2)t.push(parseInt(i.substr(e,2),16));return new Uint8Array(t)},H=i=>Array.from(i).map(t=>t.toString(16).padStart(2,"0")).join("");class O{static from(t){return t instanceof O?t:t instanceof Uint8Array?new O(t):typeof t=="string"?new O(W(t)):new O(new Uint8Array(t))}constructor(t){this.buffer=t}toString(t="hex"){return H(this.buffer)}toJSON(){return this.toString()}}const ae={comment_payout_beneficiaries:0,update_proposal_end_date:1},se=i=>{switch(i){case"@@000000021":return 3200000035;case"@@000000013":return 3200000003;case"@@000000037":return 3200000070;default:throw new Error("Invalid NAI")}},b=()=>{throw new Error("Void can not be serialized")},r=(i,t)=>{i.writeVString(t)},K=(i,t)=>{i.writeInt16(t)},P=(i,t)=>{i.writeInt64(t)},le=(i,t)=>{i.writeUint8(t)},I=(i,t)=>{i.writeUint16(t)},_=(i,t)=>{i.writeUint32(t)},$=(i,t)=>{i.writeUint64(t)},z=(i,t)=>{i.writeByte(t?1:0)},Y=i=>(t,e)=>{t.writeVarint32(ae[e.type]),i(t,e.value)},h=(i,t)=>{i.writeInt64(t.amount),i.writeUint32(se(t.nai))},L=(i,t)=>{i.writeUint32(Math.floor(new Date(t+"Z").getTime()/1e3))},F=(i,t)=>{t===null||typeof t=="string"&&t.slice(-39)==="1111111111111111111111111111111114T1Anm"?i.append(new Uint8Array(33).fill(0)):i.append(j.from(t).key)},V=(i=null)=>(t,e)=>{e=O.from(e);const n=e.buffer.length;if(i){if(n!==i)throw new Error(`Unable to serialize binary. Expected ${i} bytes, got ${n}`)}else t.writeVarint32(n);t.append(e.buffer)},G=V(),B=(i,t)=>(e,n)=>{e.writeVarint32(n.length);for(const[o,l]of n)i(e,o),t(e,l)},u=i=>(t,e)=>{t.writeVarint32(e.length);for(const n of e)i(t,n)},A=i=>(t,e)=>{for(const[n,o]of i)try{o(t,e[n])}catch(l){throw l.message=`${n}: ${l.message}`,l}},R=i=>(t,e)=>{e!==void 0?(t.writeByte(1),i(t,e)):t.writeByte(0)},f=A([["weight_threshold",_],["account_auths",B(r,I)],["key_auths",B(F,I)]]),ce=A([["account",r],["weight",I]]),X=A([["base",h],["quote",h]]),Z=A([["previous",V(20)],["timestamp",L],["witness",r],["transaction_merkle_root",V(20)],["extensions",u(b)],["witness_signature",V(65)]]),he=A([["account_creation_fee",h],["maximum_block_size",_],["hbd_interest_rate",I]]),s=(i,t)=>{const e=A(t);return(n,o)=>{n.writeVarint32(i),e(n,o)}},a={};a.account_create_operation=s(9,[["fee",h],["creator",r],["new_account_name",r],["owner",f],["active",f],["posting",f],["memo_key",F],["json_metadata",r]]);a.account_create_with_delegation_operation=s(41,[["fee",h],["delegation",h],["creator",r],["new_account_name",r],["owner",f],["active",f],["posting",f],["memo_key",F],["json_metadata",r],["extensions",u(b)]]);a.account_update_operation=s(10,[["account",r],["owner",R(f)],["active",R(f)],["posting",R(f)],["memo_key",F],["json_metadata",r]]);a.account_witness_proxy_operation=s(13,[["account",r],["proxy",r]]);a.account_witness_vote_operation=s(12,[["account",r],["witness",r],["approve",z]]);a.cancel_transfer_from_savings_operation=s(34,[["from",r],["request_id",_]]);a.change_recovery_account_operation=s(26,[["account_to_recover",r],["new_recovery_account",r],["extensions",u(b)]]);a.claim_account_operation=s(22,[["creator",r],["fee",h],["extensions",u(b)]]);a.claim_reward_balance_operation=s(39,[["account",r],["reward_hive",h],["reward_hbd",h],["reward_vests",h]]);a.comment_operation=s(1,[["parent_author",r],["parent_permlink",r],["author",r],["permlink",r],["title",r],["body",r],["json_metadata",r]]);a.comment_options_operation=s(19,[["author",r],["permlink",r],["max_accepted_payout",h],["percent_hbd",I],["allow_votes",z],["allow_curation_rewards",z],["extensions",u(Y(A([["beneficiaries",u(ce)]])))]]);a.convert_operation=s(8,[["owner",r],["requestid",_],["amount",h]]);a.create_claimed_account_operation=s(23,[["creator",r],["new_account_name",r],["owner",f],["active",f],["posting",f],["memo_key",F],["json_metadata",r],["extensions",u(b)]]);a.custom_operation=s(15,[["required_auths",u(r)],["id",I],["data",G]]);a.custom_binary_operation=s(35,[["required_owner_auths",u(r)],["required_active_auths",u(r)],["required_posting_auths",u(r)],["required_auths",u(f)],["id",r],["data",G]]);a.custom_json_operation=s(18,[["required_auths",u(r)],["required_posting_auths",u(r)],["id",r],["json",r]]);a.decline_voting_rights_operation=s(36,[["account",r],["decline",z]]);a.delegate_vesting_shares_operation=s(40,[["delegator",r],["delegatee",r],["vesting_shares",h]]);a.delete_comment_operation=s(17,[["author",r],["permlink",r]]);a.escrow_approve_operation=s(31,[["from",r],["to",r],["agent",r],["who",r],["escrow_id",_],["approve",z]]);a.escrow_dispute_operation=s(28,[["from",r],["to",r],["agent",r],["who",r],["escrow_id",_]]);a.escrow_release_operation=s(29,[["from",r],["to",r],["agent",r],["who",r],["receiver",r],["escrow_id",_],["hbd_amount",h],["hive_amount",h]]);a.escrow_transfer_operation=s(27,[["from",r],["to",r],["agent",r],["escrow_id",_],["hbd_amount",h],["hive_amount",h],["fee",h],["ratification_deadline",L],["escrow_expiration",L],["json_meta",r]]);a.feed_publish_operation=s(7,[["publisher",r],["exchange_rate",X]]);a.limit_order_cancel_operation=s(6,[["owner",r],["orderid",_]]);a.limit_order_create_operation=s(5,[["owner",r],["orderid",_],["amount_to_sell",h],["min_to_receive",h],["fill_or_kill",z],["expiration",L]]);a.limit_order_create2_operation=s(21,[["owner",r],["orderid",_],["amount_to_sell",h],["fill_or_kill",z],["exchange_rate",X],["expiration",L]]);a.recover_account_operation=s(25,[["account_to_recover",r],["new_owner_authority",f],["recent_owner_authority",f],["extensions",u(b)]]);a.report_over_production_operation=s(16,[["reporter",r],["first_block",Z],["second_block",Z]]);a.request_account_recovery_operation=s(24,[["recovery_account",r],["account_to_recover",r],["new_owner_authority",f],["extensions",u(b)]]);a.reset_account_operation=s(37,[["reset_account",r],["account_to_reset",r],["new_owner_authority",f]]);a.set_reset_account_operation=s(38,[["account",r],["current_reset_account",r],["reset_account",r]]);a.set_withdraw_vesting_route_operation=s(20,[["from_account",r],["to_account",r],["percent",I],["auto_vest",z]]);a.transfer_operation=s(2,[["from",r],["to",r],["amount",h],["memo",r]]);a.transfer_from_savings_operation=s(33,[["from",r],["request_id",_],["to",r],["amount",h],["memo",r]]);a.transfer_to_savings_operation=s(32,[["from",r],["to",r],["amount",h],["memo",r]]);a.transfer_to_vesting_operation=s(3,[["from",r],["to",r],["amount",h]]);a.vote_operation=s(0,[["voter",r],["author",r],["permlink",r],["weight",K]]);a.withdraw_vesting_operation=s(4,[["account",r],["vesting_shares",h]]);a.witness_update_operation=s(11,[["owner",r],["url",r],["block_signing_key",F],["props",he],["fee",h]]);a.witness_set_properties_operation=s(42,[["owner",r],["props",B(r,G)],["extensions",u(b)]]);a.account_update2_operation=s(43,[["account",r],["owner",R(f)],["active",R(f)],["posting",R(f)],["memo_key",R(F)],["json_metadata",r],["posting_json_metadata",r],["extensions",u(b)]]);a.create_proposal_operation=s(44,[["creator",r],["receiver",r],["start_date",L],["end_date",L],["daily_pay",h],["subject",r],["permlink",r],["extensions",u(b)]]);a.update_proposal_votes_operation=s(45,[["voter",r],["proposal_ids",u(P)],["approve",z],["extensions",u(b)]]);a.remove_proposal_operation=s(46,[["proposal_owner",r],["proposal_ids",u(P)],["extensions",u(b)]]);const ue=A([["end_date",L]]);a.update_proposal_operation=s(47,[["proposal_id",$],["creator",r],["daily_pay",h],["subject",r],["permlink",r],["extensions",u(Y(ue))]]);a.collateralized_convert_operation=s(48,[["owner",r],["requestid",_],["amount",h]]);a.recurrent_transfer_operation=s(49,[["from",r],["to",r],["amount",h],["memo",r],["recurrence",I],["executions",I],["extensions",u(b)]]);const ee=(i,t)=>{const e=a[t.type];if(!e)throw new Error(`No serializer for operation: ${t.type}`);try{e(i,t.value)}catch(n){throw n.message=`${t.type}: ${n.message}`,n}},fe=A([["ref_block_num",I],["ref_block_prefix",_],["expiration",L],["operations",u(ee)],["extensions",u(r)]]),we=A([["from",F],["to",F],["nonce",$],["check",_],["encrypted",V()]]),pe={Array:u,Asset:h,Authority:f,Binary:V,Boolean:z,Date:L,FlatMap:B,Int16:K,Int64:P,Memo:we,Object:A,Operation:ee,Optional:R,Price:X,PublicKey:F,Extension:Y,String:r,Transaction:fe,UInt16:I,UInt32:_,UInt64:$,UInt8:le,Void:b},Q=async i=>{const t=await window.crypto.subtle.digest("SHA-256",i);return new Uint8Array(t)},_e=W("beeab0de00000000000000000000000000000000000000000000000000000000"),ye=async(i,t=_e)=>{const e=new g(g.DEFAULT_CAPACITY,g.LITTLE_ENDIAN),n={...i};try{pe.Transaction(e,n)}catch(k){throw new Error("Unable to serialize transaction: "+k)}e.flip();const o=new Uint8Array(e.toBuffer()),l=new Uint8Array([...t,...o]),p=H(await Q(o)).slice(0,40);return{digest:await Q(l),txId:p,bin:l}};export{Q as sha256,ye as transactionDigest};
